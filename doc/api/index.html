<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="generator" content="made with love by dartdoc 0.42.0">
  <meta name="description" content="uniris_lib_dart API docs, for the Dart programming language.">
  <title>uniris_lib_dart - Dart API docs</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="static-assets/github.css">
  <link rel="stylesheet" href="static-assets/styles.css">
  <link rel="icon" href="static-assets/favicon.png">

  
</head>


<body data-base-href=""
      data-using-base-href="false">

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="https://github.com/redDwarf03/uniris_lib_dart">uniris_lib_dart package</a></li>
  </ol>
  <div class="self-name">uniris_lib_dart</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<main>


  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
  <li><a href="https://github.com/redDwarf03/uniris_lib_dart">uniris_lib_dart package</a></li>
</ol>


    <h5 class="hidden-xs"><span class="package-name">uniris_lib_dart</span> <span class="package-kind">package</span></h5>
    <ol>
      <li class="section-title">Libraries</li>
      <li><a href="crypto/crypto-library.html">crypto</a></li>
      <li><a href="key_pair/key_pair-library.html">key_pair</a></li>
      <li><a href="secret/secret-library.html">secret</a></li>
      <li><a href="uniris_lib/uniris_lib-library.html">uniris_lib</a></li>
      <li><a href="utils/utils-library.html">utils</a></li>
</ol>

  </div>

  <div id="dartdoc-main-content" class="main-content">
      
<section class="desc markdown">
  <p><a href="https://github.com/redDwarf03/uniris_lib_dart/actions/workflows/ci.yaml"><img src="https://github.com/redDwarf03/uniris_lib_dart/actions/workflows/ci.yaml/badge.svg" alt="CI"></a> <a href="https://pub.dartlang.org/packages/uniris_lib_dart"><img src="https://img.shields.io/pub/v/uniris_lib_dart.svg" alt="Pub"></a></p>
<h1 id="uniris_lib_dart">uniris_lib_dart</h1>
<p>Uniris dart library for Flutter based on <a href="https://github.com/UNIRIS/uniris-libjs">Official Uniris Javascript library for Node and Browser</a></p>
<h2 id="usage">Usage</h2>
<p>This library aims to provide a easy way to create Uniris transaction and to send them over the network.</p>
<p>It supports the Uniris Cryptography rules which are:</p>
<ul>
<li>
<p>Algorithm identification: the first byte of key and hashes identify the curve or the digest algorithm used to help determine which algorithm during
verification.</p>
<pre class="language-dart"><code>
    Ed25519    Public key
      |           /
      |          /
    &lt;&lt;0, 106, 58, 193, 73, 144, 121, 104, 101, 53, 140, 125, 240, 52, 222, 35, 181,
    13, 81, 241, 114, 227, 205, 51, 167, 139, 100, 176, 111, 68, 234, 206, 72&gt;&gt;

     NIST P-256   Public key
      |          /
      |         /
    &lt;&lt;1, 4, 7, 161, 46, 148, 183, 43, 175, 150, 13, 39, 6, 158, 100, 2, 46, 167,
     101, 222, 82, 108, 56, 71, 28, 192, 188, 104, 154, 182, 87, 11, 218, 58, 107,
    222, 154, 48, 222, 193, 176, 88, 174, 1, 6, 154, 72, 28, 217, 222, 147, 106,
    73, 150, 128, 209, 93, 99, 115, 17, 39, 96, 47, 203, 104, 34&gt;&gt;
</code></pre>
</li>
<li>
<p>Key derivation:</p>
<p>To be able to retrieve previous public key, the Uniris network designs the key derivation through a seed (passphrase) and an index(number of
previous public keys/transactions).
The procedure is described as follows:</p>
<pre class="language-dart"><code>  The seed generates a master key and an entropy used in the child keys generation.

                                                             / (256 bytes) Next private key
                        (256 bytes) Master key  --&gt; HMAC-512
                      /                              Key: Master entropy,
    seed --&gt; HMAC-512                                Data: Master key + index)
                      \
                       (256 bytes) Master entropy

</code></pre>
</li>
</ul>
<h2 id="api">API</h2>
<h3 id="cryptographic-functions">Cryptographic functions</h3>
<h4 id="derivekeypairseed-index-curve">deriveKeyPair(seed, index, curve)</h4>
<p>It creates a new keypair into hexadecimal format</p>
<ul>
<li><code>seed</code> is hexadecimal encoding representing the transaction chain seed to be able to derive and generate the keys</li>
<li><code>index</code> is the number of transactions in the chain, to generate the actual and the next public key (see below the cryptography section)</li>
<li><code>curve</code> (optional, "ed25519" by default) is the elliptic curve to use for the key generation (can be "ed25519", "P256", "secp256k1")</li>
</ul>
<pre class="language-dart"><code class="language-dart">  import 'package:uniris_lib_dart/crypto.dart' as crypto;
  import 'package:uniris_lib_dart/key_pair.dart';
  import 'package:uniris_lib_dart/utils.dart';

  KeyPair keypair = crypto.deriveKeyPair("mysuperpassphraseorseed", 0);
  // uint8ListToHex(keypair.publicKey) =&gt; 00a6e144cdd34c608f88cc5a92d0962e7cfe9843b0bb62fefbdb60eb41814b7c92
</code></pre>
<h4 id="ecencryptdata-publickey">ecEncrypt(data, publicKey)</h4>
<p>Perform an ECIES encryption using a public key and a data</p>
<ul>
<li><code>data</code> Data to encrypt</li>
<li><code>publicKey</code> Public key to derive a shared secret and for whom the content must be encrypted</li>
</ul>
<pre class="language-dart"><code class="language-dart">  import 'package:uniris_lib_dart/crypto.dart' as crypto;
  import 'package:uniris_lib_dart/key_pair.dart';
  import 'package:uniris_lib_dart/utils.dart';

  Uint8List cipher = crypto.ecEncrypt("dataToEncrypt" "00b1d3750edb9381c96b1a975a55b5b4e4fb37bfab104c10b0b6c9a00433ec4646");
</code></pre>
<h4 id="aesencryptdata-publickey">aesEncrypt(data, publicKey)</h4>
<p><em>Don't available for the moment... soon...</em></p>
<h3 id="transactionbuilding">TransactionBuilding</h3>
<p><code>new TransactionBuilder(type)</code> creates a new instance of the transaction builder</p>
<p><code>type</code> is the string defining the type of transaction to generate ("keychain", "identity", "transfer", "hosting", "code_proposal", "code_approval", "nft")</p>
<p>The transaction builder instance contains the following methods:</p>
<h4 id="setcodecode">setCode(code)</h4>
<p>Add the code in the <code>data.code</code> section of the transaction
  <code>code</code> is a string defining the smart contract</p>
<h4 id="setcontentcontent">setContent(content)</h4>
<p>Add the content in the <code>data.content</code> section of the transaction
  <code>content</code> is a string defining the smart contract</p>
<h4 id="setsecretsecret">setSecret(secret)</h4>
<p>Add the secret in the <code>data.keys.secret</code> section of the transaction
  <code>secret</code> is the hexadecimal encoding or Uint8List representing the encrypted secret</p>
<h4 id="addauthorizedkeypublickey-encryptedsecretkey">addAuthorizedKey(publicKey, encryptedSecretKey)</h4>
<p>Add an authorized public key to decrypt the secret to the <code>data.keys.authorizedKeys</code> section of the transaction</p>
<ul>
<li><code>publicKey</code> is the hexadecimal encoding or Uint8List representing the public key</li>
<li><code>encryptedSecretKey</code> is the hexadecimal encoding or Uint8List representing the secret key encrypted with the public key (see <code>ecEncrypt</code>)</li>
</ul>
<h4 id="adducotransferto-amount">addUCOTransfer(to, amount)</h4>
<p>Add a UCO transfer to the <code>data.ledger.uco.transfers</code> section of the transaction</p>
<ul>
<li><code>to</code> is hexadecimal encoding or Uint8List representing the transaction address (recipient) to receive the funds</li>
<li><code>amount</code> is the number of uco to send (double)</li>
</ul>
<h4 id="addnfttransferto-amount-nft_address">addNFTTransfer(to, amount, nft_address)</h4>
<p>Add a NFT transfer to the <code>data.ledger.nft.transfers</code> section of the transaction</p>
<ul>
<li><code>to</code> is hexadecimal encoding or Uint8List representing the transaction address (recipient) to receive the funds</li>
<li><code>amount</code> is the number of uco to send (double)</li>
<li><code>nft_address</code> is hexadecimal encoding or Uint8List representing the NFT address to spend</li>
</ul>
<h4 id="addrecipientto">addRecipient(to)</h4>
<p>Add a recipient (for non UCO transfers, ie. smart contract interaction) to the <code>data.recipient</code> section of the transaction</p>
<ul>
<li><code>to</code> is hexadecimal encoding or Uint8List representing the transaction address (recipient)</li>
</ul>
<h4 id="buildseed-index-curve-hashalgo">build(seed, index, curve, hashAlgo)</h4>
<p>Generate <code>address</code>, <code>timestamp</code>, <code>previousPublicKey</code>, <code>previousSignature</code>, <code>originSignature</code> of the transaction and 
  serialize it using a custom binary protocol.</p>
<ul>
<li><code>seed</code> is hexadecimal encoding or Uint8List representing the transaction chain seed to be able to derive and generate the keys</li>
<li><code>index</code> is the number of transactions in the chain, to generate the actual and the next public key (see below the cryptography section)</li>
<li><code>curve</code> is the elliptic curve to use for the key generation (can be "ed25519", "P256", "secp256k1")</li>
<li><code>hashAlgo</code> is the hash algorithm to use to generate the address (can be "sha256", "sha512", "sha3-256", "sha3-512", "blake2b")</li>
</ul>
<pre class="language-dart"><code class="language-dart">  import 'package:uniris_lib_dart/transaction_builder.dart';

  var tx = new TransactionBuilder("transfer")
    .addUCOTransfer("00b1d3750edb9381c96b1a975a55b5b4e4fb37bfab104c10b0b6c9a00433ec4646", 0.420) 
    .build("mysuperpassphraseorseed", 0) 
</code></pre>
<h4 id="originsignprivatekey">originSign(privateKey)</h4>
<p>Sign the transaction with an origin device private key</p>
<ul>
<li><code>privateKey</code> is hexadecimal encoding or Uint8List representing the private key to generate the origin signature to able to perform the ProofOfWork and authorize the transaction</li>
</ul>
<pre class="language-dart"><code class="language-dart">  import 'package:uniris_lib_dart/transaction_builder.dart';

  var tx = new TransactionBuilder("transfer")
    .addUCOTransfer("00b1d3750edb9381c96b1a975a55b5b4e4fb37bfab104c10b0b6c9a00433ec4646", 0.420) 
    .build("mysuperpassphraseorseed", 0) 
    .originSign(originPrivateKey)

</code></pre>
<h4 id="tojson">toJSON()</h4>
<p>Export the transaction generated into JSON</p>
<pre class="language-dart"><code class="language-dart">  import 'package:uniris_lib_dart/transaction_builder.dart';

  var tx = new TransactionBuilder("transfer")
    .addUCOTransfer("00b1d3750edb9381c96b1a975a55b5b4e4fb37bfab104c10b0b6c9a00433ec4646", 0.420) 
    .build("mysuperpassphraseorseed", 0) 
    .toJSON()
</code></pre>
<h3 id="remote-endpoint-calls">Remote Endpoint calls</h3>
<h4 id="sendtransactiontx-endpoint">sendTransaction(tx, endpoint)</h4>
<p>Dispatch the transaction to a node by serializing a GraphQL request</p>
<p><em>Don't available for the moment... soon...</em></p>
<h4 id="gettransactionindexaddress-endpoint">getTransactionIndex(address, endpoint)</h4>
<p>Query a node to find the length of the chain to retrieve the transaction index</p>
<p><em>Don't available for the moment... soon...</em></p>
<h4 id="getstoragenoncepublickeyendpoint">getStorageNoncePublicKey(endpoint)</h4>
<p>Query a node to find the public key of the shared storage node key</p>
<p><em>Don't available for the moment... soon...</em></p>
<h2 id="running-the-tests">Running the tests</h2>
<pre class="language-bash"><code class="language-bash">flutter test
</code></pre>
</section>


      <section class="summary">
          <h2>Libraries</h2>
        <dl>
          <dt id="crypto">
  <span class="name"><a href="crypto/crypto-library.html">crypto</a></span> 

</dt>
<dd> 
</dd>

          <dt id="key_pair">
  <span class="name"><a href="key_pair/key_pair-library.html">key_pair</a></span> 

</dt>
<dd> 
</dd>

          <dt id="secret">
  <span class="name"><a href="secret/secret-library.html">secret</a></span> 

</dt>
<dd> 
</dd>

          <dt id="uniris_lib">
  <span class="name"><a href="uniris_lib/uniris_lib-library.html">uniris_lib</a></span> 

</dt>
<dd> 
</dd>

          <dt id="utils">
  <span class="name"><a href="utils/utils-library.html">utils</a></span> 

</dt>
<dd> 
</dd>

        </dl>
      </section>

  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div>

</main>

<footer>
  <span class="no-break">
    uniris_lib_dart
      0.0.3+3
  </span>

  
</footer>


<script src="static-assets/highlight.pack.js"></script>
<script src="static-assets/script.js"></script>



</body>

</html>

